# GHC 8.6.x Migration Guide


This guide summarises the changes you may need to make to your code to migrate from GHC 8.4 to GHC 8.6. This guide complements the GHC 8.6.x release notes which should be consulted as well.

---

## Compiler changes

### Constructor-less GADTs now require `GADTSyntax`


Data types with empty `where` clauses (such as `data T where`) are no longer valid without the `GADTSyntax` extension. (Due to an oversight, previous versions of GHC would accept them without the extension enabled.)

### `-Wincomplete-patterns` now applies to patterns in guards and `MultiWayIf`


Due to a bug, previous versions of GHC would not emit any `-Wincomplete-patterns` warnings at all for incomplete patterns inside of guards or `MultiWayIf` expressions. This bug has been fixed, which means that code like:

```
foo::Bool->Intfoo b =if| b ->1
```


Will now raise a warning in GHC 8.6:

```wiki
warning: [-Wincomplete-patterns]
    Pattern match(es) are non-exhaustive
    In a multi-way if alternative:
        Guards do not cover entire pattern space
```

### `PolyKinds` and `TypeInType` are pickier


GHC is now more diligent about catching illegal uses of kind polymorphism that snuck into recent GHC releases. For instance, this used to be accepted without `PolyKinds`:

```
classC a where
  c ::Proxy(x :: a)
```


Despite the fact that `a` is used as a kind variable in the type signature for `c`. This is now an error unless `PolyKinds` is explicitly enabled.


Moreover, GHC 8.4 would accept the following without the use of `TypeInType` (or even `PolyKinds`!):

```
f:: forall k (a :: k).Proxy a
f=Proxy
```


Despite the fact that `k` is used as both a type and kind variable. This is now an error unless `TypeInType` is explicitly enabled.

---

## Library changes

TODO